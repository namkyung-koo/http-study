## 인터넷 네트워크

### 인터넷 통신
- 클라이언트 측에서 데이터를 전송하면 서버 측에서 응답 메시지를 전송한다.

### IP(Internet Protocol)

#### 인터넷 프로토콜의 역할
- 지정한 IP 주소(IP Address)에 데이터를 전달한다.
- **패킷(Packet)**이라는 통신 단위로 데이터를 전달한다.

#### IP 패킷 정보
- 출발지 IP, 목적지 IP 등의 정보로 전송 데이터를 감싼다.
- 인터넷의 수많은 서버 노드들을 거쳐 목적지에 데이터를 전송한다. (클라이언트 패킷 전달)
- 데이터를 전송 받은 서버 측에서 출발지 IP에 대한 정보를 가지고 클라이언트 측에 응답 메시지를 전송한다. (서버 패킷 전달)

#### IP 프로토콜의 한계
- **비연결성**: 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송한다.
  - 대상 서버가 패킷을 받을 수 있는 상태인지 알 수 없기 때문.
- **비신뢰성**: 중간에 패킷이 유실되거나 패킷이 순서대로 전송되지 않을 수 있다.
- **프로그램 구분**: 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면, 데이터를 전송 받을 애플리케이션을 구분할 수 없다.

### TCP, UDP

#### 인터넷 프로토콜 스택의 4계층
- 애플리케이션 계층 - HTTP, FTP
- 전송 계층 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

#### 예시 - 전송 과정
1. 프로그램이 Hello, world! 메시지를 생성한다.
2. SOCKET 라이브러리를 통해 전달한다.
3. TCP 정보를 생성하여 전송할 데이터를 감싼다.
4. IP 패킷을 생성하여 TCP 데이터가 포함된 패킷을 감싼다.
5. 네트워크 인터페이스 이를테면 LAN 드라이버나 LAN 장비를 거쳐 인터넷에 전송된다.

#### TCP/IP 패킷 정보
- **IP 패킷**: 출발지 IP, 목적지 IP, ...
- **TCP 세그먼트**: 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보, ...

#### TCP(Transmission Control Protocol, 전송 제어 프로토콜) 특징
- **연결지향** - TCP 3 way handshake (가상 연결)
- **데이터 전달 보증**: 서버 측에서 데이터를 잘 받았다는 응답 메시지를 클라이언트 측에 전송한다.
- **순서 보장**: 패킷의 순서가 바뀐 부분부터 다시 전송하라는 메시지를 클라이언트 측에 전송한다.
- 신뢰할 수 있는 프로토콜이며, 현재는 대부분 TCP를 사용한다.

#### TCP 3 way handshake 과정
1. 클라이언트 측에서 서버 측에 **SYN(접속 요청)** 전송
2. 서버 측에서 **ACK(요청 수락)** + **SYN(접속 요청)** 을 클라이언트 측에 전송
3. 클라이언트 측에서 **ACK(요청 수락)** 을 서버 측에 전송
   1. **ACK(요청 수락)** 과 함께 데이터를 전송할 수 있다.

#### UDP(User Datagram Protocol, 사용자 데이터그램 프로토콜) 특징
- 기능이 거의 없기 때문에 하얀 도화지에 비유한다.
- **연결지향 X**: TCP 3 way handshake를 사용하지 않는다.
- **데이터 전달 보증 X**
- **순서 보장 X**
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠르다
- PORT, 체크섬 정도만 추가됐을 뿐, IP와 거의 같다. 그러므로 애플리케이션에서 추가 작업을 필요로 한다.

### PORT
- PORT 번호로 같은 IP 내에서 프로세스를 구분한다.
- 0 ~ 65535: 할당 가능한 포트 번호
- 0 ~ 1023: 잘 알려진 포트 번호로 사용하지 않는 것이 좋다.
  - FTP - 20, 21
  - TELNET - 23
  - HTTP - 80
  - HTTPS - 443

### DNS
- Domain Name System, 도메인 네임 시스템
- IP는 외우기 어렵고, 변경될 수 있다는 점을 보완
- 도메인 명을 IP 주소로 변환해준다.

#### DNS 사용
1. 클라이언트(100.100.100.1)가 DNS 서버에 도메인 명(google.com)을 전송한다.
2. DNS 서버에서 해당 도메인 명에 할당된 IP 주소(200.200.200.2)를 응답한다.
3. 클라이언트(100.100.100.1)은 전송 받은 IP 주소(200.200.200.2)로 접속한다.